/**
 * This file was auto-generated by Fern from our API Definition.
 */
package com.cohere.api.requests;

import com.cohere.api.core.ObjectMappers;
import com.cohere.api.types.EmbedInputType;
import com.cohere.api.types.EmbedRequestTruncate;
import com.cohere.api.types.EmbeddingType;
import com.fasterxml.jackson.annotation.JsonAnyGetter;
import com.fasterxml.jackson.annotation.JsonAnySetter;
import com.fasterxml.jackson.annotation.JsonIgnoreProperties;
import com.fasterxml.jackson.annotation.JsonInclude;
import com.fasterxml.jackson.annotation.JsonProperty;
import com.fasterxml.jackson.annotation.JsonSetter;
import com.fasterxml.jackson.annotation.Nulls;
import com.fasterxml.jackson.databind.annotation.JsonDeserialize;
import java.util.HashMap;
import java.util.List;
import java.util.Map;
import java.util.Objects;
import java.util.Optional;

@JsonInclude(JsonInclude.Include.NON_ABSENT)
@JsonDeserialize(builder = EmbedRequest.Builder.class)
public final class EmbedRequest {
    private final Optional<List<String>> texts;

    private final Optional<List<String>> images;

    private final Optional<String> model;

    private final Optional<EmbedInputType> inputType;

    private final Optional<List<EmbeddingType>> embeddingTypes;

    private final Optional<EmbedRequestTruncate> truncate;

    private final Map<String, Object> additionalProperties;

    private EmbedRequest(
            Optional<List<String>> texts,
            Optional<List<String>> images,
            Optional<String> model,
            Optional<EmbedInputType> inputType,
            Optional<List<EmbeddingType>> embeddingTypes,
            Optional<EmbedRequestTruncate> truncate,
            Map<String, Object> additionalProperties) {
        this.texts = texts;
        this.images = images;
        this.model = model;
        this.inputType = inputType;
        this.embeddingTypes = embeddingTypes;
        this.truncate = truncate;
        this.additionalProperties = additionalProperties;
    }

    /**
     * @return An array of strings for the model to embed. Maximum number of texts per call is <code>96</code>.
     */
    @JsonProperty("texts")
    public Optional<List<String>> getTexts() {
        return texts;
    }

    /**
     * @return An array of image data URIs for the model to embed. Maximum number of images per call is <code>1</code>.
     * <p>The image must be a valid <a href="https://developer.mozilla.org/en-US/docs/Web/URI/Schemes/data">data URI</a>. The image must be in either <code>image/jpeg</code> or <code>image/png</code> format and has a maximum size of 5MB.</p>
     * <p>Images are only supported with Embed v3.0 and newer models.</p>
     */
    @JsonProperty("images")
    public Optional<List<String>> getImages() {
        return images;
    }

    /**
     * @return ID of one of the available <a href="https://docs.cohere.com/docs/cohere-embed">Embedding models</a>.
     */
    @JsonProperty("model")
    public Optional<String> getModel() {
        return model;
    }

    @JsonProperty("input_type")
    public Optional<EmbedInputType> getInputType() {
        return inputType;
    }

    /**
     * @return Specifies the types of embeddings you want to get back. Not required and default is None, which returns the Embed Floats response type. Can be one or more of the following types.
     * <ul>
     * <li><code>&quot;float&quot;</code>: Use this when you want to get back the default float embeddings. Supported with all Embed models.</li>
     * <li><code>&quot;int8&quot;</code>: Use this when you want to get back signed int8 embeddings. Supported with Embed v3.0 and newer Embed models.</li>
     * <li><code>&quot;uint8&quot;</code>: Use this when you want to get back unsigned int8 embeddings. Supported with Embed v3.0 and newer Embed models.</li>
     * <li><code>&quot;binary&quot;</code>: Use this when you want to get back signed binary embeddings. Supported with Embed v3.0 and newer Embed models.</li>
     * <li><code>&quot;ubinary&quot;</code>: Use this when you want to get back unsigned binary embeddings. Supported with Embed v3.0 and newer Embed models.</li>
     * </ul>
     */
    @JsonProperty("embedding_types")
    public Optional<List<EmbeddingType>> getEmbeddingTypes() {
        return embeddingTypes;
    }

    /**
     * @return One of <code>NONE|START|END</code> to specify how the API will handle inputs longer than the maximum token length.
     * <p>Passing <code>START</code> will discard the start of the input. <code>END</code> will discard the end of the input. In both cases, input is discarded until the remaining input is exactly the maximum input token length for the model.</p>
     * <p>If <code>NONE</code> is selected, when the input exceeds the maximum input token length an error will be returned.</p>
     */
    @JsonProperty("truncate")
    public Optional<EmbedRequestTruncate> getTruncate() {
        return truncate;
    }

    @java.lang.Override
    public boolean equals(Object other) {
        if (this == other) return true;
        return other instanceof EmbedRequest && equalTo((EmbedRequest) other);
    }

    @JsonAnyGetter
    public Map<String, Object> getAdditionalProperties() {
        return this.additionalProperties;
    }

    private boolean equalTo(EmbedRequest other) {
        return texts.equals(other.texts)
                && images.equals(other.images)
                && model.equals(other.model)
                && inputType.equals(other.inputType)
                && embeddingTypes.equals(other.embeddingTypes)
                && truncate.equals(other.truncate);
    }

    @java.lang.Override
    public int hashCode() {
        return Objects.hash(this.texts, this.images, this.model, this.inputType, this.embeddingTypes, this.truncate);
    }

    @java.lang.Override
    public String toString() {
        return ObjectMappers.stringify(this);
    }

    public static Builder builder() {
        return new Builder();
    }

    @JsonIgnoreProperties(ignoreUnknown = true)
    public static final class Builder {
        private Optional<List<String>> texts = Optional.empty();

        private Optional<List<String>> images = Optional.empty();

        private Optional<String> model = Optional.empty();

        private Optional<EmbedInputType> inputType = Optional.empty();

        private Optional<List<EmbeddingType>> embeddingTypes = Optional.empty();

        private Optional<EmbedRequestTruncate> truncate = Optional.empty();

        @JsonAnySetter
        private Map<String, Object> additionalProperties = new HashMap<>();

        private Builder() {}

        public Builder from(EmbedRequest other) {
            texts(other.getTexts());
            images(other.getImages());
            model(other.getModel());
            inputType(other.getInputType());
            embeddingTypes(other.getEmbeddingTypes());
            truncate(other.getTruncate());
            return this;
        }

        /**
         * <p>An array of strings for the model to embed. Maximum number of texts per call is <code>96</code>.</p>
         */
        @JsonSetter(value = "texts", nulls = Nulls.SKIP)
        public Builder texts(Optional<List<String>> texts) {
            this.texts = texts;
            return this;
        }

        public Builder texts(List<String> texts) {
            this.texts = Optional.ofNullable(texts);
            return this;
        }

        /**
         * <p>An array of image data URIs for the model to embed. Maximum number of images per call is <code>1</code>.</p>
         * <p>The image must be a valid <a href="https://developer.mozilla.org/en-US/docs/Web/URI/Schemes/data">data URI</a>. The image must be in either <code>image/jpeg</code> or <code>image/png</code> format and has a maximum size of 5MB.</p>
         * <p>Images are only supported with Embed v3.0 and newer models.</p>
         */
        @JsonSetter(value = "images", nulls = Nulls.SKIP)
        public Builder images(Optional<List<String>> images) {
            this.images = images;
            return this;
        }

        public Builder images(List<String> images) {
            this.images = Optional.ofNullable(images);
            return this;
        }

        /**
         * <p>ID of one of the available <a href="https://docs.cohere.com/docs/cohere-embed">Embedding models</a>.</p>
         */
        @JsonSetter(value = "model", nulls = Nulls.SKIP)
        public Builder model(Optional<String> model) {
            this.model = model;
            return this;
        }

        public Builder model(String model) {
            this.model = Optional.ofNullable(model);
            return this;
        }

        @JsonSetter(value = "input_type", nulls = Nulls.SKIP)
        public Builder inputType(Optional<EmbedInputType> inputType) {
            this.inputType = inputType;
            return this;
        }

        public Builder inputType(EmbedInputType inputType) {
            this.inputType = Optional.ofNullable(inputType);
            return this;
        }

        /**
         * <p>Specifies the types of embeddings you want to get back. Not required and default is None, which returns the Embed Floats response type. Can be one or more of the following types.</p>
         * <ul>
         * <li><code>&quot;float&quot;</code>: Use this when you want to get back the default float embeddings. Supported with all Embed models.</li>
         * <li><code>&quot;int8&quot;</code>: Use this when you want to get back signed int8 embeddings. Supported with Embed v3.0 and newer Embed models.</li>
         * <li><code>&quot;uint8&quot;</code>: Use this when you want to get back unsigned int8 embeddings. Supported with Embed v3.0 and newer Embed models.</li>
         * <li><code>&quot;binary&quot;</code>: Use this when you want to get back signed binary embeddings. Supported with Embed v3.0 and newer Embed models.</li>
         * <li><code>&quot;ubinary&quot;</code>: Use this when you want to get back unsigned binary embeddings. Supported with Embed v3.0 and newer Embed models.</li>
         * </ul>
         */
        @JsonSetter(value = "embedding_types", nulls = Nulls.SKIP)
        public Builder embeddingTypes(Optional<List<EmbeddingType>> embeddingTypes) {
            this.embeddingTypes = embeddingTypes;
            return this;
        }

        public Builder embeddingTypes(List<EmbeddingType> embeddingTypes) {
            this.embeddingTypes = Optional.ofNullable(embeddingTypes);
            return this;
        }

        /**
         * <p>One of <code>NONE|START|END</code> to specify how the API will handle inputs longer than the maximum token length.</p>
         * <p>Passing <code>START</code> will discard the start of the input. <code>END</code> will discard the end of the input. In both cases, input is discarded until the remaining input is exactly the maximum input token length for the model.</p>
         * <p>If <code>NONE</code> is selected, when the input exceeds the maximum input token length an error will be returned.</p>
         */
        @JsonSetter(value = "truncate", nulls = Nulls.SKIP)
        public Builder truncate(Optional<EmbedRequestTruncate> truncate) {
            this.truncate = truncate;
            return this;
        }

        public Builder truncate(EmbedRequestTruncate truncate) {
            this.truncate = Optional.ofNullable(truncate);
            return this;
        }

        public EmbedRequest build() {
            return new EmbedRequest(texts, images, model, inputType, embeddingTypes, truncate, additionalProperties);
        }
    }
}
